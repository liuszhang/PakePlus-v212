import{q as J,s as q,t as ue,u as pe,v as Se,w as Oe,x as Q,y as De,z as he,A as ee,E as Te,r as n,G as me,H as Le,I as ye,J as Re,K as Ne,M as Ke,N as We,O as _e,Q as Be,U as fe,V as Me,W as ze,Z as Ge,_ as Ve,$ as Ue,a0 as Xe,a1 as Ye,a2 as Fe,a3 as $e,a4 as X,a5 as He,a6 as ae,a7 as te,a8 as re,a9 as N,aa as Ze,ab as Je,ac as L,ad as qe,ae as Qe,af as ea,ag as aa,ah as ve,ai as ta,aj as $,ak as ra,al as Y,am as xe,an as ge,j as s,T as sa,S as ia,D as na,a as je,B as la,R as oa,b as se,C as k,d as w,e as B,f as M,i as z,X as G,Y as W,h as V,o as H,k as ie,l as ca,m as ne}from"./index-DFx7F7AW.js";var Ae=(a,e,r,t)=>ue(a,"xAxis",e,t),be=(a,e,r,t)=>pe(a,"xAxis",e,t),Ie=(a,e,r,t)=>ue(a,"yAxis",r,t),Pe=(a,e,r,t)=>pe(a,"yAxis",r,t),da=J([q,Ae,Ie,be,Pe],(a,e,r,t,o)=>he(a,"xAxis")?ee(e,t,!1):ee(r,o,!1)),ua=(a,e,r,t,o)=>o,Ce=J([Te,ua],(a,e)=>a.filter(r=>r.type==="area").find(r=>r.id===e)),pa=(a,e,r,t,o)=>{var i,c=Ce(a,e,r,t,o);if(c!=null){var l=q(a),d=he(l,"xAxis"),u;if(d?u=Q(a,"yAxis",r,t):u=Q(a,"xAxis",e,t),u!=null){var{stackId:v}=c,g=De(c);if(!(v==null||g==null)){var y=(i=u[v])===null||i===void 0?void 0:i.stackedData;return y?.find(m=>m.key===g)}}}},ha=J([q,Ae,Ie,be,Pe,pa,Se,da,Ce,Oe],(a,e,r,t,o,i,c,l,d,u)=>{var{chartData:v,dataStartIndex:g,dataEndIndex:y}=c;if(!(d==null||a!=="horizontal"&&a!=="vertical"||e==null||r==null||t==null||o==null||t.length===0||o.length===0||l==null)){var{data:m}=d,f;if(m&&m.length>0?f=m:f=v?.slice(g,y+1),f!=null)return Ta({layout:a,xAxis:e,yAxis:r,xAxisTicks:t,yAxisTicks:o,dataStartIndex:g,areaSettings:d,stackedData:i,displayedData:f,chartBaseValue:u,bandSize:l})}}),ma=["id"],ya=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function T(){return T=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)({}).hasOwnProperty.call(r,t)&&(a[t]=r[t])}return a},T.apply(null,arguments)}function Ee(a,e){if(a==null)return{};var r,t,o=fa(a,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);for(t=0;t<i.length;t++)r=i[t],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(o[r]=a[r])}return o}function fa(a,e){if(a==null)return{};var r={};for(var t in a)if({}.hasOwnProperty.call(a,t)){if(e.indexOf(t)!==-1)continue;r[t]=a[t]}return r}function le(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,t)}return r}function R(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?le(Object(r),!0).forEach(function(t){va(a,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(r,t))})}return a}function va(a,e,r){return(e=xa(e))in a?Object.defineProperty(a,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[e]=r,a}function xa(a){var e=ga(a,"string");return typeof e=="symbol"?e:e+""}function ga(a,e){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var t=r.call(a,e);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function F(a,e){return a&&a!=="none"?a:e}var ja=a=>{var{dataKey:e,name:r,stroke:t,fill:o,legendType:i,hide:c}=a;return[{inactive:c,dataKey:e,type:i,color:F(t,o),value:fe(r,e),payload:a}]};function Aa(a){var{dataKey:e,data:r,stroke:t,strokeWidth:o,fill:i,name:c,hide:l,unit:d}=a;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:t,strokeWidth:o,fill:i,dataKey:e,nameKey:void 0,name:fe(c,e),hide:l,type:a.tooltipType,color:F(t,i),unit:d}}}function ba(a){var{clipPathId:e,points:r,props:t}=a,{needClip:o,dot:i,dataKey:c}=t,l=ve(t);return n.createElement(ra,{points:r,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:c,baseProps:l,needClip:o,clipPathId:e})}function Ia(a){var{showLabels:e,children:r,points:t}=a,o=t.map(i=>{var c,l,d={x:(c=i.x)!==null&&c!==void 0?c:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return R(R({},d),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:d,fill:void 0})});return n.createElement(aa,{value:e?o:void 0},r)}function oe(a){var{points:e,baseLine:r,needClip:t,clipPathId:o,props:i}=a,{layout:c,type:l,stroke:d,connectNulls:u,isRange:v}=i,{id:g}=i,y=Ee(i,ma),m=ve(y),f=ta(y);return n.createElement(n.Fragment,null,e?.length>1&&n.createElement(X,{clipPath:t?"url(#clipPath-".concat(o,")"):void 0},n.createElement($,T({},f,{id:g,points:e,connectNulls:u,type:l,baseLine:r,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&n.createElement($,T({},m,{className:"recharts-area-curve",layout:c,type:l,connectNulls:u,fill:"none",points:e})),d!=="none"&&v&&n.createElement($,T({},m,{className:"recharts-area-curve",layout:c,type:l,connectNulls:u,fill:"none",points:r}))),n.createElement(ba,{points:e,props:y,clipPathId:o}))}function Pa(a){var{alpha:e,baseLine:r,points:t,strokeWidth:o}=a,i=t[0].y,c=t[t.length-1].y;if(!Y(i)||!Y(c))return null;var l=e*Math.abs(i-c),d=Math.max(...t.map(u=>u.x||0));return N(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(u=>u.x||0),d)),N(d)?n.createElement("rect",{x:0,y:i<c?i:i-l,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(l)}):null}function Ca(a){var{alpha:e,baseLine:r,points:t,strokeWidth:o}=a,i=t[0].x,c=t[t.length-1].x;if(!Y(i)||!Y(c))return null;var l=e*Math.abs(i-c),d=Math.max(...t.map(u=>u.y||0));return N(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(u=>u.y||0),d)),N(d)?n.createElement("rect",{x:i<c?i:i-l,y:0,width:l,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}function Ea(a){var{alpha:e,layout:r,points:t,baseLine:o,strokeWidth:i}=a;return r==="vertical"?n.createElement(Pa,{alpha:e,points:t,baseLine:o,strokeWidth:i}):n.createElement(Ca,{alpha:e,points:t,baseLine:o,strokeWidth:i})}function ka(a){var{needClip:e,clipPathId:r,props:t,previousPointsRef:o,previousBaselineRef:i}=a,{points:c,baseLine:l,isAnimationActive:d,animationBegin:u,animationDuration:v,animationEasing:g,onAnimationStart:y,onAnimationEnd:m}=t,f=Ze(t,"recharts-area-"),[A,j]=n.useState(!1),C=!A,I=n.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),P=n.useCallback(()=>{typeof y=="function"&&y(),j(!0)},[y]),p=o.current,x=i.current;return n.createElement(Ia,{showLabels:C,points:c},t.children,n.createElement(Je,{animationId:f,begin:u,duration:v,isActive:d,easing:g,onAnimationEnd:I,onAnimationStart:P,key:f},h=>{if(p){var S=p.length/c.length,_=h===1?c:c.map((b,K)=>{var O=Math.floor(K*S);if(p[O]){var D=p[O];return R(R({},b),{},{x:L(D.x,b.x,h),y:L(D.y,b.y,h)})}return b}),E;return N(l)?E=L(x,l,h):qe(l)||Qe(l)?E=L(x,0,h):E=l.map((b,K)=>{var O=Math.floor(K*S);if(Array.isArray(x)&&x[O]){var D=x[O];return R(R({},b),{},{x:L(D.x,b.x,h),y:L(D.y,b.y,h)})}return b}),h>0&&(o.current=_,i.current=E),n.createElement(oe,{points:_,baseLine:E,needClip:e,clipPathId:r,props:t})}return h>0&&(o.current=c,i.current=l),n.createElement(X,null,d&&n.createElement("defs",null,n.createElement("clipPath",{id:"animationClipPath-".concat(r)},n.createElement(Ea,{alpha:h,points:c,baseLine:l,layout:t.layout,strokeWidth:t.strokeWidth}))),n.createElement(X,{clipPath:"url(#animationClipPath-".concat(r,")")},n.createElement(oe,{points:c,baseLine:l,needClip:e,clipPathId:r,props:t})))}),n.createElement(ea,{label:t.label}))}function wa(a){var{needClip:e,clipPathId:r,props:t}=a,o=n.useRef(null),i=n.useRef();return n.createElement(ka,{needClip:e,clipPathId:r,props:t,previousPointsRef:o,previousBaselineRef:i})}class Sa extends n.PureComponent{render(){var{hide:e,dot:r,points:t,className:o,top:i,left:c,needClip:l,xAxisId:d,yAxisId:u,width:v,height:g,id:y,baseLine:m,zIndex:f}=this.props;if(e)return null;var A=Xe("recharts-area",o),j=y,{r:C,strokeWidth:I}=Ye(r),P=Fe(r),p=C*2+I;return n.createElement($e,{zIndex:f},n.createElement(X,{className:A},l&&n.createElement("defs",null,n.createElement(He,{clipPathId:j,xAxisId:d,yAxisId:u}),!P&&n.createElement("clipPath",{id:"clipPath-dots-".concat(j)},n.createElement("rect",{x:c-p/2,y:i-p/2,width:v+p,height:g+p}))),n.createElement(wa,{needClip:l,clipPathId:j,props:this.props})),n.createElement(ae,{points:t,mainColor:F(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(m)&&n.createElement(ae,{points:m,mainColor:F(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var ke={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Be.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:Le.area};function Oa(a){var e,r=me(a,ke),{activeDot:t,animationBegin:o,animationDuration:i,animationEasing:c,connectNulls:l,dot:d,fill:u,fillOpacity:v,hide:g,isAnimationActive:y,legendType:m,stroke:f,xAxisId:A,yAxisId:j}=r,C=Ee(r,ya),I=Me(),P=ze(),{needClip:p}=Ge(A,j),x=ye(),{points:h,isRange:S,baseLine:_}=(e=Ve(we=>ha(we,A,j,x,a.id)))!==null&&e!==void 0?e:{},E=Ue();if(I!=="horizontal"&&I!=="vertical"||E==null||P!=="AreaChart"&&P!=="ComposedChart")return null;var{height:b,width:K,x:O,y:D}=E;return!h||!h.length?null:n.createElement(Sa,T({},C,{activeDot:t,animationBegin:o,animationDuration:i,animationEasing:c,baseLine:_,connectNulls:l,dot:d,fill:u,fillOpacity:v,height:b,hide:g,layout:I,isAnimationActive:y,isRange:S,legendType:m,needClip:p,points:h,stroke:f,width:K,left:O,top:D,xAxisId:A,yAxisId:j}))}var Da=(a,e,r,t,o)=>{var i=r??e;if(N(i))return i;var c=a==="horizontal"?o:t,l=c.scale.domain();if(c.type==="number"){var d=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return i==="dataMin"?u:i==="dataMax"||d<0?d:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function Ta(a){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:t},stackedData:o,layout:i,chartBaseValue:c,xAxis:l,yAxis:d,displayedData:u,dataStartIndex:v,xAxisTicks:g,yAxisTicks:y,bandSize:m}=a,f=o&&o.length,A=Da(i,c,r,l,d),j=i==="horizontal",C=!1,I=u.map((p,x)=>{var h;f?h=o[v+x]:(h=te(p,t),Array.isArray(h)?C=!0:h=[A,h]);var S=h[1]==null||f&&!e&&te(p,t)==null;return j?{x:re({axis:l,ticks:g,bandSize:m,entry:p,index:x}),y:S?null:d.scale(h[1]),value:h,payload:p}:{x:S?null:l.scale(h[1]),y:re({axis:d,ticks:y,bandSize:m,entry:p,index:x}),value:h,payload:p}}),P;return f||C?P=I.map(p=>{var x=Array.isArray(p.value)?p.value[0]:null;return j?{x:p.x,y:x!=null&&p.y!=null?d.scale(x):null,payload:p.payload}:{x:x!=null?l.scale(x):null,y:p.y,payload:p.payload}}):P=j?d.scale(A):l.scale(A),{points:I,baseLine:P,isRange:C}}function La(a){var e=me(a,ke),r=ye();return n.createElement(Re,{id:e.id,type:"area"},t=>n.createElement(n.Fragment,null,n.createElement(Ne,{legendPayload:ja(e)}),n.createElement(Ke,{fn:Aa,args:e}),n.createElement(We,{type:"area",id:t,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:_e(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),n.createElement(Oa,T({},e,{id:t}))))}var U=n.memo(La);U.displayName="Area";var Ra=["axis"],ce=n.forwardRef((a,e)=>n.createElement(xe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ra,tooltipPayloadSearcher:ge,categoricalChartProps:a,ref:e})),Na=["axis"],Ka=n.forwardRef((a,e)=>n.createElement(xe,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Na,tooltipPayloadSearcher:ge,categoricalChartProps:a,ref:e}));const{Title:Wa,Paragraph:_a}=sa,{RangePicker:Ba}=na,{Option:Z}=je,de=[{month:"1月",calls:4e3,users:2400,newUsers:600},{month:"2月",calls:3e3,users:1398,newUsers:450},{month:"3月",calls:2e3,users:9800,newUsers:1200},{month:"4月",calls:2780,users:3908,newUsers:800},{month:"5月",calls:1890,users:4800,newUsers:900},{month:"6月",calls:2390,users:3800,newUsers:750},{month:"7月",calls:3490,users:4300,newUsers:850}],Ma=[{week:"第1周",successRate:99.5,avgTime:18},{week:"第2周",successRate:99.6,avgTime:17.5},{week:"第3周",successRate:99.7,avgTime:17},{week:"第4周",successRate:99.8,avgTime:16.5}],za=[{month:"1月",systems:2,tools:5},{month:"2月",systems:1,tools:3},{month:"3月",systems:3,tools:4},{month:"4月",systems:2,tools:2},{month:"5月",systems:1,tools:3},{month:"6月",systems:2,tools:4},{month:"7月",systems:3,tools:5}],Va=({onExport:a})=>{const[e,r]=n.useState(null),[t,o]=n.useState("monthly"),[i,c]=n.useState(!1),l=()=>{c(!0),setTimeout(()=>{c(!1),a&&a(),console.log("趋势分析报表导出成功")},1e3)};return s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{style:{marginBottom:24},children:[s.jsx(Wa,{level:4,children:"趋势分析"}),s.jsx(_a,{type:"secondary",children:"本报表展示系统使用趋势、性能趋势和资源增长趋势，帮助了解系统发展动态。"})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[s.jsxs(ia,{children:[s.jsx(Ba,{value:e,onChange:d=>r(d),placeholder:["开始日期","结束日期"]}),s.jsxs(je,{value:t,onChange:o,style:{width:150},children:[s.jsx(Z,{value:"monthly",children:"月度趋势"}),s.jsx(Z,{value:"weekly",children:"周度趋势"}),s.jsx(Z,{value:"resource",children:"资源增长"})]})]}),s.jsx(la,{type:"primary",icon:s.jsx(oa,{}),onClick:l,loading:i,children:"导出报表"})]}),s.jsxs(se,{gutter:[16,16],style:{marginBottom:24},children:[s.jsx(k,{span:6,children:s.jsx(w,{children:s.jsx(B,{title:"月环比增长率",value:15.2,suffix:"%",precision:1,valueStyle:{color:"#52c41a"}})})}),s.jsx(k,{span:6,children:s.jsx(w,{children:s.jsx(B,{title:"新增用户数",value:850,suffix:"人",precision:0})})}),s.jsx(k,{span:6,children:s.jsx(w,{children:s.jsx(B,{title:"新增资源数",value:8,suffix:"个",precision:0})})}),s.jsx(k,{span:6,children:s.jsx(w,{children:s.jsx(B,{title:"性能提升率",value:5.3,suffix:"%",precision:1,valueStyle:{color:"#52c41a"}})})})]}),s.jsxs(se,{gutter:[16,16],style:{flex:1},children:[t==="monthly"&&s.jsxs(s.Fragment,{children:[s.jsx(k,{span:16,children:s.jsx(w,{title:"月度调用量趋势",style:{height:400},children:s.jsx(M,{width:"100%",height:340,children:s.jsxs(ce,{data:de,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorCalls",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.2})]})}),s.jsx(z,{strokeDasharray:"3 3"}),s.jsx(G,{dataKey:"month"}),s.jsx(W,{}),s.jsx(V,{}),s.jsx(H,{}),s.jsx(U,{type:"monotone",dataKey:"calls",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorCalls)",name:"调用量"}),s.jsx(ie,{type:"monotone",dataKey:"users",stroke:"#82ca9d",name:"活跃用户"})]})})})}),s.jsx(k,{span:8,children:s.jsx(w,{title:"新增用户趋势",style:{height:400},children:s.jsx(M,{width:"100%",height:340,children:s.jsxs(ca,{data:de,children:[s.jsx(z,{strokeDasharray:"3 3"}),s.jsx(G,{dataKey:"month"}),s.jsx(W,{}),s.jsx(V,{}),s.jsx(ne,{dataKey:"newUsers",name:"新增用户数",fill:"#82ca9d"})]})})})})]}),t==="weekly"&&s.jsx(k,{span:24,children:s.jsx(w,{title:"周度性能趋势",style:{height:400},children:s.jsx(M,{width:"100%",height:340,children:s.jsxs(Ka,{data:Ma,children:[s.jsx(z,{strokeDasharray:"3 3"}),s.jsx(G,{dataKey:"week"}),s.jsx(W,{yAxisId:"left",orientation:"left",stroke:"#8884d8"}),s.jsx(W,{yAxisId:"right",orientation:"right",stroke:"#82ca9d"}),s.jsx(V,{}),s.jsx(H,{}),s.jsx(ne,{yAxisId:"left",dataKey:"avgTime",name:"平均响应时间(ms)",fill:"#8884d8"}),s.jsx(ie,{yAxisId:"right",type:"monotone",dataKey:"successRate",name:"成功率(%)",stroke:"#82ca9d",strokeWidth:2})]})})})}),t==="resource"&&s.jsx(k,{span:24,children:s.jsx(w,{title:"资源增长趋势",style:{height:400},children:s.jsx(M,{width:"100%",height:340,children:s.jsxs(ce,{data:za,children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"colorSystems",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.1})]}),s.jsxs("linearGradient",{id:"colorTools",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:.1})]})]}),s.jsx(z,{strokeDasharray:"3 3"}),s.jsx(G,{dataKey:"month"}),s.jsx(W,{}),s.jsx(V,{}),s.jsx(H,{}),s.jsx(U,{type:"monotone",dataKey:"systems",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorSystems)",name:"新增系统"}),s.jsx(U,{type:"monotone",dataKey:"tools",stroke:"#82ca9d",fillOpacity:1,fill:"url(#colorTools)",name:"新增工具"})]})})})})]})]})};export{Va as default};
