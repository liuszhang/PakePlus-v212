import{r as p,j as e,T as $,d as i,S,a as c,ao as j,B as o,ap as F,aq as A,R as L,ar as q,as as R,F as v,at as g,au as w,av as G,aw as H}from"./index-DFx7F7AW.js";const{Title:C,Paragraph:M}=$,{TabPane:b}=R,{Option:d}=c,{Group:W,Button:X}=H,O=[{value:"dept1",label:"研发部"},{value:"dept2",label:"市场部"},{value:"dept3",label:"财务部"},{value:"dept4",label:"人力资源部"},{value:"dept5",label:"运营部"}],U=[{value:"role1",label:"管理员"},{value:"role2",label:"系统架构师"},{value:"role3",label:"开发工程师"},{value:"role4",label:"测试工程师"},{value:"role5",label:"普通用户"}],_=[{value:"user1",label:"张三"},{value:"user2",label:"李四"},{value:"user3",label:"王五"},{value:"user4",label:"赵六"},{value:"user5",label:"钱七"}],J=[{value:"all",label:"全系统"},{value:"dept",label:"本部门"},{value:"role",label:"本角色"},{value:"self",label:"本人"}],Q=[{key:"1",type:"department",name:"研发部",reportName:"概览报表",dataScope:"all",viewPermission:!0,exportPermission:!0},{key:"2",type:"role",name:"管理员",reportName:"概览报表",dataScope:"all",viewPermission:!0,exportPermission:!0},{key:"3",type:"user",name:"张三",reportName:"概览报表",dataScope:"all",viewPermission:!0,exportPermission:!0}],Y=({onSave:k})=>{const[t,I]=p.useState("department"),[n,T]=p.useState("overview"),[x,u]=p.useState(Q),[N,f]=p.useState(!1),P=a=>{const l=j.find(s=>s.key===a);return l?l.title:"所有报表"},h=x.filter(a=>a.type===t&&(n==="all"||a.reportName===P(n))),B=()=>{f(!0),setTimeout(()=>{f(!1),k&&k(),g.success("权限配置保存成功")},1e3)},z=()=>{const a={key:Date.now().toString(),type:t,name:"",reportName:P(n==="all"?"overview":n),dataScope:"all",viewPermission:!0,exportPermission:!1};u([...x,a])},D=a=>{u(x.filter(l=>l.key!==a))},r=(a,l,s)=>{u(x.map(y=>y.key===a?{...y,[l]:s}:y))},E=()=>{g.info("导入权限配置功能待实现")},K=()=>{g.info("导出权限配置功能待实现")},m=[{title:"对象名称",dataIndex:"name",key:"name",render:(a,l)=>e.jsx(c,{value:a,style:{width:120},onChange:s=>r(l.key,"name",s),placeholder:"选择对象",children:(t==="department"?O:t==="role"?U:_).map(s=>e.jsx(d,{value:s.label,children:s.label},s.value))})},{title:"报表名称",dataIndex:"reportName",key:"reportName",render:(a,l)=>e.jsx(c,{value:a,style:{width:120},onChange:s=>r(l.key,"reportName",s),placeholder:"选择报表",children:j.map(s=>e.jsx(d,{value:s.title,children:s.title},s.key))})},{title:"数据范围",dataIndex:"dataScope",key:"dataScope",render:(a,l)=>e.jsx(c,{value:a,style:{width:100},onChange:s=>r(l.key,"dataScope",s),children:J.map(s=>e.jsx(d,{value:s.value,children:s.label},s.value))})},{title:"查看权限",dataIndex:"viewPermission",key:"viewPermission",render:(a,l)=>e.jsx(w,{checked:a,onChange:s=>r(l.key,"viewPermission",s.target.checked)})},{title:"导出权限",dataIndex:"exportPermission",key:"exportPermission",render:(a,l)=>e.jsx(w,{checked:a,onChange:s=>r(l.key,"exportPermission",s.target.checked)})},{title:"操作",key:"action",render:(a,l)=>e.jsx(o,{danger:!0,icon:e.jsx(G,{}),size:"small",onClick:()=>D(l.key),children:"删除"})}];return e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(C,{level:4,children:"报表权限配置"}),e.jsx(M,{type:"secondary",children:"配置不同维度（部门、角色、用户）对各报表的访问权限和数据范围。"})]}),e.jsx(i,{style:{marginBottom:24},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(S,{children:[e.jsxs(c,{value:n,style:{width:150},onChange:T,children:[e.jsx(d,{value:"all",children:"所有报表"}),j.map(a=>e.jsx(d,{value:a.key,children:a.title},a.key))]}),e.jsx(o,{type:"primary",icon:e.jsx(F,{}),onClick:z,children:"添加权限"})]}),e.jsxs(S,{children:[e.jsx(o,{icon:e.jsx(A,{}),onClick:E,children:"导入配置"}),e.jsx(o,{icon:e.jsx(L,{}),onClick:K,children:"导出配置"}),e.jsx(o,{type:"primary",icon:e.jsx(q,{}),onClick:B,loading:N,children:"保存配置"})]})]})}),e.jsxs(R,{activeKey:t,onChange:I,style:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsx(b,{tab:"按部门配置",children:e.jsx(i,{children:e.jsx(v,{columns:m,dataSource:h,rowKey:"key",pagination:{pageSize:10}})})},"department"),e.jsx(b,{tab:"按角色配置",children:e.jsx(i,{children:e.jsx(v,{columns:m,dataSource:h,rowKey:"key",pagination:{pageSize:10}})})},"role"),e.jsx(b,{tab:"按用户配置",children:e.jsx(i,{children:e.jsx(v,{columns:m,dataSource:h,rowKey:"key",pagination:{pageSize:10}})})},"user")]}),e.jsxs(i,{style:{marginTop:16},children:[e.jsx(C,{level:5,children:"权限说明"}),e.jsxs("div",{style:{fontSize:14,color:"#666",lineHeight:1.8},children:[e.jsxs("div",{children:["• ",e.jsx("strong",{children:"数据范围定义："})]}),e.jsxs("div",{style:{marginLeft:20,marginBottom:8},children:["- 全系统：可查看所有系统数据",e.jsx("br",{}),"- 本部门：只能查看用户所在部门的数据",e.jsx("br",{}),"- 本角色：只能查看用户角色权限范围内的数据",e.jsx("br",{}),"- 本人：只能查看用户自己相关的数据",e.jsx("br",{})]}),e.jsxs("div",{children:["• ",e.jsx("strong",{children:"权限优先级："}),"用户级权限 > 角色级权限 > 部门级权限"]}),e.jsxs("div",{children:["• ",e.jsx("strong",{children:"导出权限："}),"拥有导出权限的用户可以将报表数据导出为Excel或PDF格式"]})]})]})]})};export{Y as default};
